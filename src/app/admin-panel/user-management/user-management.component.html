<p-table [value]="users" styleClass="p-database-striped">
  <ng-template pTemplate="header">
    <tr>
      <th>Username</th>
      <th>Active roles</th>
      <th></th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-user>
    <tr>
      <td>{{ user?.username }}</td>
      <td>{{ user?.roles }}</td>
      <td>
        <button
          pButton
          pRipple
          type="button"
          icon="pi pi-user-edit"
          class="p-button-rounded p-button-warning p-button-text"
          (click)="showDialog(user)"
        ></button>
      </td>
    </tr>
  </ng-template>
</p-table>
<p-dialog [(visible)]="displayModal">
  <ng-template pTemplate="header">
    Edit roles for {{ selectedUser.username }}
  </ng-template>
  <form>
    <div *ngFor="let role of availableRoles" class="p-field-checkbox">
      <p-checkbox
        name="userRoles"
        value="role"
        [value]="role"
        [(ngModel)]="selectedRoles"
        [inputId]="role.key"
        [disabled]="isDisabled()"
      ></p-checkbox>
      <label [for]="role.key">{{ role.name }}</label>
    </div>
  </form>

  <ng-template pTemplate="footer">
    <button
      pButton
      pRipple
      type="button"
      label="submit"
      (click)="updateSelectedRoles()"
    ></button>
    <button
      pButton
      pRipple
      type="button"
      label="Cancel"
      class="p-button-danger"
      (click)="hideModal()"
    ></button>
  </ng-template>
</p-dialog>
